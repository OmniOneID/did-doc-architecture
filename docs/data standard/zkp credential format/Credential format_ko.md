---
puppeteer:
    pdf:
        format: A4
        displayHeaderFooter: true
        landscape: false
        scale: 0.8
        margin:
            top: 1.2cm
            right: 1cm
            bottom: 1cm
            left: 1cm
    image:
        quality: 100
        fullPage: false
---

Credential format
==

- 주제
    - Credential 데이터 형식 정의
- 작성: 박동준
- 일자: 2025-04-30
- 버전: v1.0.0


개정이력
---

| 버전   | 일자       | 변경 내용                                    |
| ------ | ---------- | -------------------------------------------- |
| v1.0.0 | 2025-04-30 | 초안                                         |


<div style="page-break-after: always;"></div>

---

<!-- TOC tocDepth:2..4 chapterDepth:2..6 -->

- [Credential format](#credential-format)
  - [개정이력](#개정이력)
  - [1. 개요](#1-개요)
    - [1.1. 참조문서](#11-참조문서)
  - [2. Credential 구조](#2-credential-구조)
    - [2.1. `Credential` object](#21-credential-object)
  - [3. 예시](#3-예시)
    - [3.1. `운전면허증 Credential`](#31-운전면허증-credential)

<!-- /TOC -->


<div style="page-break-after: always;"></div>

## 1. 개요
Credential은 발급자(Issuer)가 피증명인(Holder)에게 제공하는 디지털 증명서로 탈중앙화 신원 증명(DID) 시스템에서 사용됩니다.
이 Credential은 영지식 증명(ZKP) 방식을 기반으로 하며, 검증자(Verifier)가 원본 데이터를 직접 확인하지 않고도 그 유효성을 검증할 수 있도록 설계되어 있습니다.
schemaId와 credDefId를 통해 이 Credential이 어떤 정의를 따르며, 어떤 기관에서 발급했는지 확인할 수 있습니다.
values 필드에는 Credential이 담고 있는 속성 데이터가 저장되며, raw 값(원본 데이터)과 encoded 값(암호화된 데이터)을 포함합니다.
signature 필드는 발급자의 서명이 포함된 부분으로, Credential의 무결성을 보장합니다.
signatureCorrectnessProof는 Credential이 올바르게 서명되었음을 증명하는 역할을 합니다.


### 1.1. 참조문서

| 참조명          | 문서명                                              | 위치 |
| --------------- | --------------------------------------------------- | ---- |
| [OSD]           | OpenDID Schema Definition Language                  |      |
| [ZKP-DATA-SPEC] | (OpenDID) ZKP 데이터 명세서(ZKP Data Specification) |      |


<div style="page-break-after: always;"></div>

## 2. Credential 구조

여기에 정의되지 않은 항목은 `[ZKP-DATA-SPEC]`을 참조한다.

### 2.1. `Credential` object

`Vc` 객체는 이슈어가 Holder에게 발급하는 Verifiable Credential로서 아래와 같은 구조를 가진다.

- Credential Metadata
- Claim(s)
- Proof(s)

```c#
def object Credential: "credential"
{
    + identifier "credentialId" : "credential ID"
    + identifier "schemaId"     : "credentialSchema ID"
    + identifier "credDefId"    : "credentialDefinition ID"
    + object "values"           : "attributes", min_extend(1)
    {
        /* 
        ... 예시 (순서 보장 필요)
        - string "zkpsex" : "성별"
        - string "zkpasort" : "면허번호"
        - string "zkpaddr" : "주소"
        - string "zkpbirth" : "생년월일"
        */
        + object $attributeValue : "AttributeValue"
        {
            + string "encoded" : ""
            + string "raw"     : "male" : "예시) 성별"
        }
    }
    + object "signature"         : "Credential의 서명 데이터"
    {
        + object "pCredential"   : "Primary 각 서명 값과 데이터" 
        {
            + string "a"  : "발급자가 생성한 Credential 서명의 일부."
            + string "e"  : "공개 지수(Exponent)로, 서명 검증 시 사용됨."
            + string "v"  : "서명의 핵심 요소인 큰 정수 값."
            + string "q"  : "추가적인 서명 관련 파라미터."
            + string "m2" : "Credential에서 사용된 추가적인 서명 요소."
        }
    }
    + object "signatureCorrectnessProof"  : "서명 정합성 증명 데이터"
    {
        + string "se" : "서명이 변조되지 않았음을 증명하는 해시 값."
        + string "c"  : "정합성을 검증하기 위한 보조 해시 값."
    }
}

```

## 3. 예시

본 장에서는 Credential의 이해를 돕기 위해 구체적인 예를 들어 추가로 설명한다.

### 3.1. `운전면허증 Credential`

```json
{
    "credentialId": "c6c46b76-0e1a-4332-9b41-1da9486cc09d",
    "schemaId": "did:omn:NcYxiDXkpYi6ov5FcYDi1e:2:mdl:1.0",
    "credDefId": "did:omn:NcYxiDXkpYi6ov5FcYDi1e:3:CL:did:omn:NcYxiDXkpYi6ov5FcYDi1e:2:mdl:1.0:Tag1",
    "values": {
      "zkpsex": {
        "encoded": "5944657099558967239210949258394887428692050081607692519917050011144233115103",
        "raw": "male"
      },
      "zkpbirth": {
        "encoded": "20010101",
        "raw": "20010101"
      },
      "zkpasort": {
        "encoded": "1111",
        "raw": "1111"
      },
      "zkpaddr": {
        "encoded": "21224889883149768092131882119095173851218656983871668929472739274089421294476",
        "raw": "seoul"
      }
    },
    "signature": {
      "pCredential": {
        "a": "98875982616817464633446891595850223533338411118852331160492527902169982228434029982618083326551648373193472476076894086997067665256283142273346340431437577250581484730590711742478557216812708790671985725266496619229680790669974139868981005492763885479913264796575799952457157386217492982204962146543313028709351893901260065259028337430667792552513931453862210064851344216522920238659738030073723033457162009578015627852583048897931073666627858310281576631376971155583747094049925757999596572278240148754936102490597998189670415889983066072890051459353712714407884048509882924446592539578523129548570067780613771471225",
        "e": "259344723055062059907025491480697571938277889515152306249728583105665800713306759149981690559193987143012367913206299323899696942213235956742930187915937583288713959081860286100011",
        "v": "8003924528980512398665527067127206266102422402791865023680891265619728173261543086760776450200919501258934598949174486396261669148424714014628130969280934470907242101006736888939481197975337689570671161083517178370223598759671540247362731738187523961909627048405867761596654163809689210798730735846208050667898988958710182094741280880538710613866440611020224145864423224919664894975316451427153988498339959712486188492566961039276030600245123196489748427094263070793219195734069072981493123869034302082523825829831149811966382321241856439567453297105353672638411753270559068998865936632021041413306604752688853438089609419594092615437287364256556768634693661959647007446043985345893860951199419955518999300976556995229954165280936026024650575748334945692337106641322437529029881610050345037088967089439026437965556183547",
        "q": "111798412089149600739490511497622746191860661175817654311989700207873971697240493753602368312189338924220377961307929215656011926173950041368230363191794859746540233560073662357579840312618694411089384217244540514660420817158040769973784809060960292911236520125257310737080617217074994382477660358021886934884455091188453321828799626851014648531925876012314308767827289174175081008875875608865210130923798523714544872388030529560444562940581236108988851890367324005325854260240911070911323451689048347526677470071595403336997101835728837268110056274805332553970635010036151099684795930623168620437794075616110852780876",
        "m2": "88474552647414202211113104363819791025935012128158586480381797774592934936761"
      }
    },
    "signatureCorrectnessProof": {
      "se": "14167165735114063931501467052665778486563967544247295358718314972194209028368089604093559836384564729118012665054795331385964273316409459623136054192820370912553785403429839133719096642681883310516475988854071892781818205915615944419656047379029228964299049154931990408315825875592338475372435479041382476184655688142044432931017042191731620597788630738400041345397278185860118264766880952624575885973004166453519351010621786216341722962293800945112452296891369490464333734071005997801868059822163827351343950964118209638922256773121214988939646396055222956441887363910202316519956100752834333802738122592193221298520",
      "c": "19166554180334812160357905473487482537686440399208470721755111141041307412699"
    }
  }
```